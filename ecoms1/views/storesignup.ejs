<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
  body{
    overflow-x: hidden;
  }
  .back-button {
            display: inline-block;
            padding: 10px 13px;
            background-color: #0A2472; 
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            margin-left: 10px;
            margin-top: 15px;
        }

        .back-button::before {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #0056b3; 
            transition: width 0.3s ease;
        }
       
        .back-button:hover::before {
            width: 100%;
        }
      
      .back-button:hover{
  background-color: #0d5dbb;
}
body {
  font-family: Arial, sans-serif;
  background-color: #f2f2f2;
  background-image: url("images/wa1.jpg");
  background-repeat: no-repeat;
  background-size: cover;
  margin: 0;
  padding: 0;
}

.main-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin-top: -40px;
}

.container {
  background-color: #eff3f4;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 8);
  padding: 20px;
  width: 900px;
  margin-top: -10px;

}

.upper {
  text-align: center;
  margin-bottom: 20px;
}

.input {
  margin-bottom: 10px;
}

.label {
  font-weight: bold;
  display: block;
}

.input-field {
  width: 60%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

button {
  padding: 5px 10px;
  background-color: #4caf50;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}


.signup-btn {
  width: 30%;
  padding: 8px;
  background-color:#0A2472;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 20px;
  margin-left: -50px;
}

.signup-btn:hover{
  background-color:#0d5dbb;
}
.signup-link {
  text-align: center;
  margin-top: 20px;
}

.bck {
  margin-top: 10px;
}
.label{
    
    display: flex;
    flex-basis: 25%;
    margin-left: 80px;
}
.input
{
    display: flex;
    flex-wrap: wrap;
    align-items: center;
}
.error-message {
    color: red;
    font-size: 20px;
    margin-left: 390px;
    font-family: emoji;
  }
  .password-icon {
  position: relative;
}

.password-icon input[type="password"] {
  padding-right: 30px;
}

.password-icon .toggle-password {
  position: absolute;
  top: 50%;
  right: 80px;
  transform: translateY(-50%);
  cursor: pointer;
  color: #999;
}

.label-container {
  display: flex;
  justify-content: flex-start;
  align-items: center;
}

.label-container span {
  color: #0f3193;
  font-weight: 600;
  margin-right: 10px;
}

#passwordVisibilityToggle{
  padding: 2px;
  background-color: rgb(27, 26, 26);

}

#confirmPasswordVisibilityToggle{
  padding: 2px;
  background-color: rgb(33, 30, 30);

}


   
</style>
</head>
<body>
  <%- include('./adminappbar.ejs', { hideDropdownItems: false }) %>

<button onclick="goBack()" class="back-button">Back</button>
 
  <form action="/storeregister" method="post" onsubmit="return validateForm()">
    <div class="main-container">
        <div class="container">
          <div class="upper">
            <h1>CREATE NEW STORE</h1>
          </div>
          <br />  

        <div class="input">
          <label for="name" class="label">Store Name</label>
          <input type="text" name="name" id="name" placeholder="Enter Store Name" required class="input-field" />
          <span id="nameError" class="error-message"></span>
        </div>
        <div class="input">
          <label for="contactname" class="label">Contact Name</label>
          <input type="text" name="contactname" id="contactname" placeholder="Enter Contact Name" required class="input-field" />
          <span id="contactnameError" class="error-message"></span>
        </div>

        <div class="input">
          <label for="mobilenumber" class="label">Mobile Number</label>
          <input type="tel" name="mobilenumber" id="mobilenumber" 
                 pattern="\d{10}" required 
                 placeholder="Enter your Mobile Number" 
                 class="input-field" 
                 maxlength="10" 
                 oninput="validateMobileNumber()" />
          <span id="mobileNumberError" class="error-message"></span>
      </div>

        <div class="input">
          <label for="place" class="label">Address</label>
          <input type="text" name="place" id="place" placeholder="Enter Store Address" class="input-field" />
          <span id="addressError" class="error-message"></span>
        </div>

        <div class="input">
          <label for="storepincode" class="label">Store Pincode</label>
          <input type="text" name="storepincode" id="storepincode" 
                 pattern="\d{6}" required 
                 placeholder="Enter Store Pin code" 
                 class="input-field" 
                 maxlength="6" 
                 oninput="validatePincode()" />
          <span id="pincodeError" class="error-message"></span>
      </div>
    
        <div class="input">
          <label for="gstnumber" class="label">GST number</label>
          <input type="text" name="gstnumber" id="gstnumber" placeholder="Enter GST number" class="input-field" />

        </div>

    <div class="input password-icon">
      <label for="password" class="label">Password</label>
      <input type="password" name="password" id="password" required minlength="8" placeholder="Enter your Password" class="input-field" oninput="validatePasswordMatch()" />
      <span class="toggle-password" id="password-icon" onclick="togglePasswordVisibility('password', 'password-icon')">
        <i class="material-icons">visibility_off</i> 
      </span>
      <span id="password-error" class="error-message"></span>
    </div>

    <div class="input password-icon">
      <label for="confirmpassword" class="label">Confirm Password</label>
      <input type="password" name="confirmpassword" id="confirmpassword" required minlength="8" placeholder="Enter your Confirm Password" class="input-field" oninput="validatePasswordMatch()" />
      <span class="toggle-password" id="confirmPassword-icon" onclick="togglePasswordVisibility('confirmpassword', 'confirmPassword-icon')">
        <i class="material-icons">visibility_off</i> 
      </span>
      
    </div>
    <span id="confirmPassword-error" class="error-message"></span>

    <input type="hidden" name="adminId" value="<%= adminId %>">

    <div style="margin-left: 50%;">
      <input type="submit" class="signup-btn" id="registerButton" value="Register">
  </div>
  
</form>

      </div>
    </div>

  <script>
    function togglePasswordVisibility(inputId, buttonId) {
    var passwordInput = document.getElementById(inputId);
    var visibilityButton = document.getElementById(buttonId);

    if (passwordInput.type === "password") {
      passwordInput.type = "text";
      visibilityButton.innerHTML = '<i class="material-icons">visibility</i>'; 
    } else {
      passwordInput.type = "password";
      visibilityButton.innerHTML = '<i class="material-icons">visibility_off</i>';
    }
  }

  function validateForm() {
    var nameInput = document.getElementById("name");
    var nameError = document.getElementById("nameError");

    var contactnameInput = document.getElementById("contactname");
    var contactnameError = document.getElementById("contactnameError");

    var mobileNumberInput = document.getElementById("mobilenumber");
    var mobileNumberError = document.getElementById("mobileNumberError");

    var addressInput = document.getElementById("address");
    var addressError = document.getElementById("addressError");

    var pincodeInput = document.getElementById("pincode");
    var pincodeError = document.getElementById("pincodeError");

    var gstnumberInput = document.getElementById("gstnumber");
    var gstnumberError = document.getElementById("gstnumberError");

    var passwordInput = document.getElementById("password");
    var confirmPasswordInput = document.getElementById("confirmpassword");
    var passwordError = document.getElementById("password-error"); 
    var confirmPasswordError = document.getElementById("confirmPassword-error"); 

    nameError.textContent = "";
    contactnameError.textContent = "";
    mobileNumberError.textContent = "";
    addressError.textContent = "";
    pincodeError.textContent = "";
    gstnumberError.textContent = "";
    passwordError.textContent = "";
    confirmPasswordError.textContent = "";

      if (nameInput.value.trim() === "") {
        nameError.textContent = "Name is required";
        return false; 
      }

       if (contactnameInput.value.trim() === "") {
        contactnameError.textContent = "Contact Name is required";
        return false; 
      }

      if (mobileNumberInput.value.trim() === "") {
        mobileNumberError.textContent = "Mobile Number is required";
        return false; 
      }

      if (addressInput.value.trim() === "") {
        addressError.textContent = "Address is required";
        return false; 
      }

      if (pincodeInput.value.trim() === "") {
        pincodeError.textContent = "Pincode is required";
        return false; 
      }

      if (gstnumberInput.value.trim() === "") {
        gstnumberError.textContent = "Username is required";
        return false; 
      }

    if (passwordInput.value.trim() === "") {
      passwordError.textContent = "Password is required";
      return false; 
    }

    if (confirmPasswordInput.value.trim() === "") {
      confirmPasswordError.textContent = "Confirm Password is required";
      return false; 
    }
    return true;
  }
  function validateMobileNumber() {
        const mobileInput = document.getElementById('mobilenumber');
        const mobileNumberError = document.getElementById('mobileNumberError');

        mobileInput.value = mobileInput.value.replace(/\D/g, '');

        if (mobileInput.value.length !== 10) {
            mobileNumberError.textContent = 'Mobile number must be exactly 10 digits.';
        } else {
            mobileNumberError.textContent = '';
        }
    }
    function validatePincode() {
        const pincodeInput = document.getElementById('storepincode');
        const pincodeError = document.getElementById('pincodeError');
        pincodeInput.value = pincodeInput.value.replace(/\D/g, '');
        
        if (pincodeInput.value.length !== 6) {
            pincodeError.textContent = 'Pincode must be exactly 6 digits.';
        } else {
            pincodeError.textContent = '';
        }
    }
  function validatePasswordMatch() {
  var passwordInput = document.getElementById("password");
  var confirmPasswordInput = document.getElementById("confirmpassword");
  var confirmPasswordError = document.getElementById("confirmPassword-error");

  if (passwordInput.value !== confirmPasswordInput.value) {
    confirmPasswordError.textContent = "Passwords do not match";
  } else {
    confirmPasswordError.textContent = ""; 
  }return true; 
  }
  const dropdownButton = document.getElementById("dropdownButton");
  const dropdownContent = document.querySelector(".dropdown-content");

  dropdownButton.addEventListener("click", function(event) {
    event.stopPropagation();
    dropdownContent.classList.toggle("show");
  });

  window.addEventListener("click", function(event) {
    if (!event.target.matches(".dropdown-button")) {
      if (dropdownContent.classList.contains("show")) {
        dropdownContent.classList.remove("show");
      }
    }
  });

  dropdownContent.addEventListener("click", function(event) {
    event.stopPropagation(); 
  });

  document.addEventListener("keydown", function(event) {
    if (event.key === "Escape" && dropdownContent.classList.contains("show")) {
      dropdownContent.classList.remove("show");
    }
  });

  function validatePasswordMatch() {
  var passwordInput = document.getElementById("password");
  var confirmPasswordInput = document.getElementById("confirmpassword");
  var confirmPasswordError = document.getElementById("confirmPassword-error");
  var registerButton = document.getElementById("registerButton");

  if (passwordInput.value !== confirmPasswordInput.value) {
    confirmPasswordError.textContent = "Passwords do not match";
    registerButton.disabled = true;
  } else {
    confirmPasswordError.textContent = ""; 
    registerButton.disabled = false; 
  }
}

  const logoutButton = document.getElementById("logout");
  logoutButton.addEventListener("click", function(event) {
    event.preventDefault();
    
    const modal = document.getElementById("logout-modal");
    modal.style.display = "block";
  });

  const cancelLogoutBtn = document.getElementById("cancel-logout");
  cancelLogoutBtn.addEventListener("click", function() {
    const modal = document.getElementById("logout-modal");
    modal.style.display = "none";
  });

  const confirmLogoutBtn = document.getElementById("confirm-logout");
  confirmLogoutBtn.addEventListener("click", function() {
    window.location.href = "http://localhost:7777"; 
    history.replaceState(null, null, 'http://localhost:7777');

  });

  function goBack() {
  window.history.back();
}
  </script>
</body>
</html>